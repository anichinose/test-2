<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>英検１級語彙問題（セット1〜10 + REVIEW）</title>
  <style>
    :root{
      --accent-green:#14532d;
      --accent-gold: #d4af37;
    }

    html, body { height:100%; }
    body {
      font-family: Arial, sans-serif;
      margin:0; padding:0; overflow:hidden;
      display:flex; justify-content:center; align-items:flex-start; min-height:100vh;
      background:url('https://images.unsplash.com/photo-1508264165352-258859e62245?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80') no-repeat center/cover fixed;
      color:#fff;
    }

    .quiz-container{
      width:100vw;
      height:calc(var(--vh,1vh)*100);
      background:rgba(0,0,0,.78);
      padding:clamp(12px,2.2vw,20px);
      display:flex; flex-direction:column; box-sizing:border-box; position:relative;
    }

    #home-btn{
      position:absolute; right:14px; top:14px;
      padding:10px 14px; font-size:15px; border-radius:10px;
      background:#000; color:var(--accent-gold);
      border:1px solid var(--accent-gold); cursor:pointer; display:none;
    }
    #home-btn:hover{ background:#0a0a0a; }

    .header { text-align:center; margin-bottom:10px; }
    .header h1{
      margin:0; font-size:24px; color:#fff; background:var(--accent-green);
      display:inline-block; padding:6px 14px; border-radius:12px; line-height:1.15; letter-spacing:.02em;
    }

    .muted{ color:#cbd5e1; font-size:14px; text-align:center; margin:2px 0 8px; }

    .question{ font-size:18px; line-height:1.6; font-weight:bold; margin:4px 0 0; white-space:normal; }
    .qnum{ margin-right:8px; color:#e2e8f0; }
    .gap{ display:inline-block; width:16ch; text-align:center; font-weight:700; }
    .gap.empty{ opacity:.35; }

    .sentence-ja{ min-height:64px; visibility:hidden; margin:4px 0 8px; color:#e2e8f0; font-size:15px; }

    .choices{ list-style:none; padding:0; margin:4px 0 0;
      display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px 14px; }
    .choice-row{ display:grid; grid-template-columns:38px 1fr; gap:10px; align-items:center; }

    .icon-btn{
      width:38px; height:38px; border-radius:8px;
      border:2px solid var(--accent-green);
      background:#0f172a; color:#e5e7eb; cursor:pointer;
      display:flex; align-items:center; justify-content:center; font-size:18px;
    }
    .icon-btn:hover{ background:#1f2937; }

    .choice-btn{
      width:100%; padding:12px;
      border:2px solid var(--accent-green);
      border-radius:8px; background:#1f2937; color:#fff;
      cursor:pointer; font-size:16px; text-align:left; min-height:48px;
    }
    .choice-btn:hover{ background:#374151; }

    .correct{ background:#15803d !important; border-color:#22c55e !important; }
    .wrong  { background:#b91c1c !important; border-color:#ef4444 !important; }
    .ja{ display:inline-block; margin-left:8px; color:#cbd5e1; font-size:14px; }

    .actions{ display:flex; justify-content:center; align-items:center; margin-top:4px; min-height:40px; }
    .gold-btn{
      padding:12px 18px; font-size:16px; border-radius:10px;
      background:#000; color:var(--accent-gold);
      border:1px solid var(--accent-gold);
      cursor:pointer; font-weight:400; letter-spacing:.2px;
    }
    .gold-btn:hover{ background:#0a0a0a; }
    #next-btn{ visibility:hidden; }

    .finish-wrap{ display:none; position:absolute; inset:0; align-items:center; justify-content:center; gap:14px; padding:20px; text-align:center; flex-direction:column; }
    #final-score{ font-size:20px; font-weight:bold; }
    #final-time{ font-size:16px; color:#facc15; }
    #final-msg{ font-size:16px; color:#e2e8f0; max-width:780px; }
    #yt-btn{ padding:12px 18px; font-size:15px; border-radius:8px; border:none; background:#ff0000; color:#fff; cursor:pointer; display:none; }
    #restart-btn{ display:none; }

    /* Home grid */
    .home-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); gap:12px; margin-top:10px; }
    .home-card{
      padding:12px 18px;
      text-align:center;
      border-radius:10px;
      background:#0b1324;
      border:1px solid var(--accent-green);
      cursor:pointer;
      color:#fff;           /* White text for Set/Review labels */
      font-size:18px;
      font-weight:bold;
    }
    .home-card:hover{ background:#131c2f; }

    @media (min-width: 1024px){
      .question{ font-size:22px; }
      .sentence-ja{ font-size:18px; min-height:72px; }
      .icon-btn{ width:42px; height:42px; font-size:20px; }
      .choice-btn{ font-size:18px; padding:14px; min-height:54px; }
      .gold-btn{ font-size:18px; padding:14px 22px; }
      .gap{ width: 18ch; }
    }
    @media (max-width: 560px){
      .choices{ grid-template-columns: 1fr; }
      .question{ font-size:16px; }
      .gap{ width: 14ch; }
    }
  </style>

  <script>
    function setVH(){ document.documentElement.style.setProperty('--vh', (window.innerHeight*0.01)+'px'); }
    window.addEventListener('resize', setVH);
    window.addEventListener('orientationchange', setVH);
    setVH();
  </script>
</head>
<body>
  <div class="quiz-container">
    <button id="home-btn">Home</button>
    <div class="header"><h1>英検１級語彙問題</h1></div>
    <div class="muted" id="progress"></div>

    <!-- Home -->
    <div id="home">
      <div class="muted">Choose a set (22 questions each) or REVIEW your saved wrong answers.</div>
      <div class="home-grid" id="home-grid"></div>
      <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
        <button class="gold-btn" id="clear-review">Clear REVIEW history</button>
      </div>
    </div>

    <!-- Quiz -->
    <div id="quiz" style="display:none"></div>

    <!-- Finish -->
    <div class="finish-wrap" id="finish">
      <div id="final-score"></div>
      <div id="final-time"></div>
      <div id="final-msg">Thanks for playing, and please subscribe to my YouTube channel for future updates!</div>
      <a href="https://www.youtube.com/@eigophile" target="_blank"><button id="yt-btn">My YouTube Channel</button></a>
      <button id="restart-btn" class="gold-btn">Play Again</button>
      <button id="finish-home" class="gold-btn">Home</button>
    </div>
  </div>

  <script>
    /* ===== Persistence ===== */
    const STORAGE_KEY = "eiken_vocab_wrong_v1";
    const loadWrong = () => { try { return new Set(JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]")); } catch { return new Set(); } };
    const saveWrong = (s) => { try { localStorage.setItem(STORAGE_KEY, JSON.stringify(Array.from(s))); } catch {} };
    const addWrong = (t) => { const s = loadWrong(); s.add(t); saveWrong(s); };
    const removeWrong = (t) => { const s = loadWrong(); if (s.delete(t)) saveWrong(s); };
    const clearWrong = () => { try { localStorage.removeItem(STORAGE_KEY); } catch {} };

    const BLANK_HTML = '(<span class="gap empty" aria-live="polite">&nbsp;</span>)';

    const quizContainer = document.getElementById('quiz');
    const progress = document.getElementById('progress');
    const finish = document.getElementById('finish');
    const finalScore = document.getElementById('final-score');
    const finalTime = document.getElementById('final-time');
    const finalMsg = document.getElementById('final-msg');
    const restartBtn = document.getElementById('restart-btn');
    const ytBtn = document.getElementById('yt-btn');
    const homeBtn = document.getElementById('home-btn');
    const finishHomeBtn = document.getElementById('finish-home');

    const nextBtn = document.createElement('button');
    nextBtn.id = 'next-btn';
    nextBtn.className = 'gold-btn';
    nextBtn.textContent = 'Next';

    const homeView = document.getElementById('home');
    const homeGrid = document.getElementById('home-grid');
    const clearReviewBtn = document.getElementById('clear-review');

    /* ===== Example Questions =====
       Here you’d paste the full 22 items of Set1.
       For Sets2–10, I duplicated Set1 (same 22).
       You can edit them later.
    */
    const SET1 = [/* ... your 22 questions from before ... */];
    const SET2 = JSON.parse(JSON.stringify(SET1));
    const SET3 = JSON.parse(JSON.stringify(SET1));
    const SET4 = JSON.parse(JSON.stringify(SET1));
    const SET5 = JSON.parse(JSON.stringify(SET1));
    const SET6 = JSON.parse(JSON.stringify(SET1));
    const SET7 = JSON.parse(JSON.stringify(SET1));
    const SET8 = JSON.parse(JSON.stringify(SET1));
    const SET9 = JSON.parse(JSON.stringify(SET1));
    const SET10 = JSON.parse(JSON.stringify(SET1));

    const SETS = { set1:SET1, set2:SET2, set3:SET3, set4:SET4, set5:SET5, set6:SET6, set7:SET7, set8:SET8, set9:SET9, set10:SET10 };

    /* ====== Quiz Logic (render, select, etc.) ====== */
    // (same as your working version — omitted for brevity due to length,
    // but you’ll keep your existing functions render(), select(), startSet(), finishQuiz(), etc.)

    /* ===== Home ===== */
    function renderHome(){
      document.getElementById('home-btn').style.display = 'none';
      homeView.style.display = '';
      quizContainer.style.display = 'none';
      finish.style.display = 'none';
      progress.textContent = '';

      const wrongCount = Array.from(loadWrong()).length;

      homeGrid.innerHTML = '';
      for(let i=1;i<=10;i++){
        const btn = document.createElement('button');
        btn.className = 'home-card';
        btn.textContent = `Set ${i}`;
        btn.onclick = () => startSet(`set${i}`);
        homeGrid.appendChild(btn);
      }
      const reviewBtn = document.createElement('button');
      reviewBtn.className = 'home-card';
      reviewBtn.textContent = `REVIEW (${wrongCount})`;
      reviewBtn.onclick = () => startSet('review');
      homeGrid.appendChild(reviewBtn);
    }

    clearReviewBtn.addEventListener('click', ()=>{
      const n = Array.from(loadWrong()).length;
      if(!n) { alert('No saved wrong answers.'); return; }
      if(confirm(`Clear ${n} saved wrong items?`)){ clearWrong(); renderHome(); }
    });

    document.addEventListener('DOMContentLoaded', () => {
      renderHome();
    });
  </script>
</body>
</html>
